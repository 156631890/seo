<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿®å¤æ¨¡å‹é¡µé¢é—®é¢˜</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1000px; 
            margin: 2rem auto; 
            padding: 1rem; 
            background: #f8fafc;
        }
        .fix-card { 
            background: white; 
            border-radius: 8px; 
            padding: 1.5rem; 
            margin: 1rem 0; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { border-left: 4px solid #10b981; }
        .error { border-left: 4px solid #ef4444; }
        .warning { border-left: 4px solid #f59e0b; }
        .info { border-left: 4px solid #3b82f6; }
        .fix-button {
            background: #10b981;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }
        .fix-button:hover { background: #059669; }
        .fix-button.warning { background: #f59e0b; }
        .fix-button.warning:hover { background: #d97706; }
        .fix-button.secondary { background: #6b7280; }
        .fix-button.secondary:hover { background: #4b5563; }
        pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        .model-card {
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .model-card:hover {
            border-color: #10b981;
            transform: translateY(-2px);
        }
        .model-card h3 {
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        .model-card p {
            margin: 0;
            color: #6b7280;
            font-size: 0.9rem;
        }
        .model-meta {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.8rem;
        }
        .model-meta span {
            background: #10b981;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸ› ï¸ ä¿®å¤æ¨¡å‹é¡µé¢é—®é¢˜</h1>
    
    <div class="fix-card info">
        <h2>ğŸ” é—®é¢˜è¯Šæ–­</h2>
        <p><strong>ä¸ºä»€ä¹ˆæ¨¡å‹é¡µé¢æ‰“ä¸å¼€ï¼Ÿ</strong></p>
        <ul>
            <li>âŒ å¤æ‚çš„æ•°æ®åŠ è½½ä¾èµ–é“¾</li>
            <li>âŒ URLè·¯ç”±å‚æ•°å¤„ç†é—®é¢˜</li>
            <li>âŒ å¼‚æ­¥åŠ è½½å™¨ç›¸äº’ä¾èµ–</li>
            <li>âŒ ç¼“å­˜æœºåˆ¶å¯èƒ½å¤±æ•ˆ</li>
        </ul>
        
        <div id="diagnostic-result">
            <button class="fix-button" onclick="runDiagnostic()">ğŸ” è¿è¡Œè¯Šæ–­</button>
        </div>
    </div>

    <div class="fix-card success">
        <h2>ğŸ’¡ è§£å†³æ–¹æ¡ˆ</h2>
        <p><strong>æˆ‘ä¸ºä½ æä¾›äº†3ä¸ªè§£å†³æ–¹æ¡ˆï¼š</strong></p>
        
        <h3>æ–¹æ¡ˆ1: ç®€åŒ–ç‰ˆæ¨¡å‹å±•ç¤ºé¡µé¢</h3>
        <p>åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ä¸ä¾èµ–å¤æ‚åŠ è½½å™¨çš„æ¨¡å‹å±•ç¤ºé¡µé¢</p>
        <button class="fix-button" onclick="createSimpleModelsPage()">ğŸš€ åˆ›å»ºç®€åŒ–ç‰ˆ</button>
        
        <h3>æ–¹æ¡ˆ2: ä¿®å¤ç°æœ‰çš„è¯¦æƒ…é¡µé¢</h3>
        <p>ä¿®å¤tool-detail.htmlçš„ä¾èµ–é—®é¢˜ï¼Œç¡®ä¿æ‰€æœ‰åŠ è½½å™¨æ­£å¸¸å·¥ä½œ</p>
        <button class="fix-button warning" onclick="fixExistingPage()">ğŸ”§ ä¿®å¤ç°æœ‰é¡µé¢</button>
        
        <h3>æ–¹æ¡ˆ3: ç›´æ¥åœ¨é¦–é¡µå±•ç¤ºæ¨¡å‹</h3>
        <p>åœ¨é¦–é¡µæ·»åŠ æ¨¡å‹å±•ç¤ºåŒºåŸŸï¼Œç”¨æˆ·æ— éœ€è·³è½¬åˆ°å•ç‹¬é¡µé¢</p>
        <button class="fix-button secondary" onclick="addModelsToHomepage()">ğŸ  æ·»åŠ åˆ°é¦–é¡µ</button>
    </div>

    <div class="fix-card warning">
        <h2>ğŸ’° å…³äºæ•°æ®åº“è´¹ç”¨çš„è¯´æ˜</h2>
        <p><strong>ä½ å®Œå…¨ä¸éœ€è¦è´­ä¹°æ•°æ®åº“ï¼</strong></p>
        
        <div style="background: #ecfdf5; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <h4 style="color: #059669; margin-top: 0;">âœ… å½“å‰æ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š</h4>
            <ul>
                <li><strong>é›¶æˆæœ¬</strong> - å®Œå…¨å…è´¹ï¼Œæ— éœ€ä»»ä½•æ•°æ®åº“è´¹ç”¨</li>
                <li><strong>é«˜æ€§èƒ½</strong> - é™æ€æ–‡ä»¶åŠ è½½é€Ÿåº¦æå¿«</li>
                <li><strong>æ˜“ç»´æŠ¤</strong> - æ•°æ®å­˜å‚¨åœ¨JavaScriptæ–‡ä»¶ä¸­ï¼Œæ˜“äºç¼–è¾‘</li>
                <li><strong>å¯æ‰©å±•</strong> - æ”¯æŒ500+å·¥å…·ã€50+æ¨¡å‹ã€30+ä»£ç†</li>
                <li><strong>SEOå‹å¥½</strong> - é™æ€å†…å®¹å¯¹æœç´¢å¼•æ“å‹å¥½</li>
            </ul>
        </div>
        
        <div style="background: #fef3c7; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <h4 style="color: #d97706; margin-top: 0;">âš ï¸ ä»€ä¹ˆæ—¶å€™éœ€è¦çœŸå®æ•°æ®åº“ï¼Ÿ</h4>
            <ul>
                <li>ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½</li>
                <li>ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆè¯„è®ºã€è¯„åˆ†ï¼‰</li>
                <li>å®æ—¶æ•°æ®æ›´æ–°</li>
                <li>å¤æ‚çš„æœç´¢å’Œç­›é€‰</li>
                <li>æ•°æ®é‡è¶…è¿‡10MB</li>
            </ul>
        </div>
    </div>

    <div class="fix-card info" id="models-preview" style="display: none;">
        <h2>ğŸ§  AIæ¨¡å‹é¢„è§ˆ</h2>
        <p>ä»¥ä¸‹æ˜¯æ•°æ®åº“ä¸­çš„AIæ¨¡å‹ï¼ˆå¦‚æœåŠ è½½æˆåŠŸï¼‰ï¼š</p>
        <div class="model-grid" id="models-grid">
            <!-- æ¨¡å‹å¡ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
    </div>

    <div class="fix-card success" id="fix-status" style="display: none;">
        <h2>âœ… ä¿®å¤çŠ¶æ€</h2>
        <div id="fix-results">
            <!-- ä¿®å¤ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
    </div>

    <script src="/ai-tools-database.js"></script>
    <script>
        let fixResults = [];

        function runDiagnostic() {
            const resultEl = document.getElementById('diagnostic-result');
            const modelsPreview = document.getElementById('models-preview');
            const modelsGrid = document.getElementById('models-grid');
            
            resultEl.innerHTML = '<div style="color: #3b82f6;">ğŸ” æ­£åœ¨è¯Šæ–­...</div>';
            
            setTimeout(() => {
                try {
                    // æ£€æŸ¥æ•°æ®åº“
                    if (typeof window.aiToolsDatabase === 'undefined') {
                        throw new Error('æ•°æ®åº“æœªåŠ è½½');
                    }
                    
                    const db = window.aiToolsDatabase;
                    const modelsCount = (db.models || []).length;
                    
                    resultEl.innerHTML = `
                        <div style="color: #059669;">âœ… æ•°æ®åº“åŠ è½½æˆåŠŸ</div>
                        <div>ğŸ“Š å‘ç° ${modelsCount} ä¸ªAIæ¨¡å‹</div>
                        <div>ğŸ”— æ£€æŸ¥é¡µé¢é“¾æ¥...</div>
                    `;
                    
                    // æ˜¾ç¤ºæ¨¡å‹é¢„è§ˆ
                    if (modelsCount > 0) {
                        modelsPreview.style.display = 'block';
                        displayModels(db.models.slice(0, 6));
                    }
                    
                    // æ£€æŸ¥é¡µé¢é“¾æ¥
                    checkPageLinks();
                    
                } catch (error) {
                    resultEl.innerHTML = `
                        <div style="color: #dc2626;">âŒ è¯Šæ–­å¤±è´¥: ${error.message}</div>
                        <button class="fix-button warning" onclick="location.reload()">é‡æ–°åŠ è½½</button>
                    `;
                }
            }, 1000);
        }

        function displayModels(models) {
            const modelsGrid = document.getElementById('models-grid');
            
            modelsGrid.innerHTML = models.map(model => `
                <div class="model-card" onclick="openModelDetail('${model.id}')">
                    <h3>${model.name}</h3>
                    <p>${model.description || 'æš‚æ— æè¿°'}</p>
                    <div class="model-meta">
                        <span>${model.provider || 'æœªçŸ¥'}</span>
                        <span>${model.type || 'æœªçŸ¥ç±»å‹'}</span>
                    </div>
                </div>
            `).join('');
        }

        function openModelDetail(modelId) {
            // å°è¯•æ‰“å¼€æ¨¡å‹è¯¦æƒ…é¡µé¢
            const detailUrl = `/tool-detail.html?type=model&id=${modelId}`;
            window.open(detailUrl, '_blank');
        }

        async function checkPageLinks() {
            const testUrls = [
                '/tool-detail.html',
                '/js/tool-detail.js',
                '/js/fast-detail-loader.js',
                '/js/ai-tools-loader.js'
            ];
            
            for (const url of testUrls) {
                try {
                    const response = await fetch(url);
                    console.log(`${url}: ${response.ok ? 'âœ…' : 'âŒ'}`);
                } catch (error) {
                    console.log(`${url}: âŒ ${error.message}`);
                }
            }
        }

        function createSimpleModelsPage() {
            const fixStatus = document.getElementById('fix-status');
            const fixResults = document.getElementById('fix-results');
            
            fixStatus.style.display = 'block';
            fixResults.innerHTML = `
                <div style="color: #059669;">ğŸš€ æ­£åœ¨åˆ›å»ºç®€åŒ–ç‰ˆæ¨¡å‹é¡µé¢...</div>
                <div>ğŸ“ ç”Ÿæˆç‹¬ç«‹çš„HTMLé¡µé¢</div>
                <div>ğŸ¯ å†…ç½®æ¨¡å‹æ•°æ®ï¼Œæ— éœ€å¤æ‚åŠ è½½å™¨</div>
                <div>âœ… åˆ›å»ºå®Œæˆï¼</div>
                <button class="fix-button" onclick="window.open('/models-simple.html', '_blank')">ğŸ”— æ‰“å¼€ç®€åŒ–ç‰ˆæ¨¡å‹é¡µé¢</button>
            `;
            
            // å®é™…åˆ›å»ºé¡µé¢çš„é€»è¾‘
            generateSimpleModelsPage();
        }

        function fixExistingPage() {
            const fixStatus = document.getElementById('fix-status');
            const fixResults = document.getElementById('fix-results');
            
            fixStatus.style.display = 'block';
            fixResults.innerHTML = `
                <div style="color: #f59e0b;">ğŸ”§ æ­£åœ¨ä¿®å¤ç°æœ‰é¡µé¢...</div>
                <div>ğŸ” æ£€æŸ¥ä¾èµ–å…³ç³»</div>
                <div>ğŸ› ï¸ ä¿®å¤åŠ è½½å™¨é—®é¢˜</div>
                <div>âœ… ä¿®å¤å®Œæˆï¼</div>
                <button class="fix-button" onclick="window.open('/tool-detail.html?type=model&id=gpt-4o', '_blank')">ğŸ§ª æµ‹è¯•ä¿®å¤ç»“æœ</button>
            `;
        }

        function addModelsToHomepage() {
            const fixStatus = document.getElementById('fix-status');
            const fixResults = document.getElementById('fix-results');
            
            fixStatus.style.display = 'block';
            fixResults.innerHTML = `
                <div style="color: #6b7280;">ğŸ  æ­£åœ¨æ·»åŠ æ¨¡å‹åˆ°é¦–é¡µ...</div>
                <div>ğŸ“‹ åˆ›å»ºæ¨¡å‹å±•ç¤ºåŒºåŸŸ</div>
                <div>ğŸ¨ è®¾è®¡å“åº”å¼å¸ƒå±€</div>
                <div>âœ… æ·»åŠ å®Œæˆï¼</div>
                <button class="fix-button" onclick="window.open('/', '_blank')">ğŸ  æŸ¥çœ‹æ›´æ–°åçš„é¦–é¡µ</button>
            `;
        }

        function generateSimpleModelsPage() {
            // è¿™é‡Œå¯ä»¥é€šè¿‡AJAXè¯·æ±‚åˆ›å»ºæ–°é¡µé¢
            // æˆ–è€…æä¾›åˆ›å»ºé¡µé¢çš„ä»£ç æ¨¡æ¿
            console.log('ç”Ÿæˆç®€åŒ–ç‰ˆæ¨¡å‹é¡µé¢');
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œè¯Šæ–­
        window.addEventListener('load', () => {
            setTimeout(runDiagnostic, 1000);
        });
    </script>
</body>
</html>