<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯¦æƒ…é¡µé¢æ€§èƒ½æµ‹è¯• - MyAI</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            line-height: 1.6;
        }
        
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .test-section h2 {
            color: #10b981;
            margin-bottom: 15px;
        }
        
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #10b981;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 5px;
        }
        
        .test-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .test-link {
            display: block;
            padding: 15px;
            background: #10b981;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            text-align: center;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        .test-link:hover {
            background: #059669;
        }
        
        .test-results {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .loading-indicator {
            display: none;
            text-align: center;
            padding: 20px;
            color: #6b7280;
        }
        
        .loading-indicator.show {
            display: block;
        }
        
        .performance-chart {
            height: 200px;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }
        
        .optimization-tips {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .optimization-tips h3 {
            color: #92400e;
            margin-top: 0;
        }
        
        .tips-list {
            list-style: none;
            padding: 0;
        }
        
        .tips-list li {
            padding: 8px 0;
            border-bottom: 1px solid #fbbf24;
        }
        
        .tips-list li:last-child {
            border-bottom: none;
        }
        
        .status-good { color: #10b981; }
        .status-warning { color: #f59e0b; }
        .status-error { color: #ef4444; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸš€ è¯¦æƒ…é¡µé¢æ€§èƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š å½“å‰æ€§èƒ½ç»Ÿè®¡</h2>
            <div class="performance-stats">
                <div class="stat-card">
                    <span class="stat-number" id="load-time">-</span>
                    <div class="stat-label">é¡µé¢åŠ è½½æ—¶é—´ (ms)</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="data-load-time">-</span>
                    <div class="stat-label">æ•°æ®åŠ è½½æ—¶é—´ (ms)</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="render-time">-</span>
                    <div class="stat-label">æ¸²æŸ“æ—¶é—´ (ms)</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="cache-hits">-</span>
                    <div class="stat-label">ç¼“å­˜å‘½ä¸­æ•°</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª æ€§èƒ½æµ‹è¯•é“¾æ¥</h2>
            <p>ç‚¹å‡»ä»¥ä¸‹é“¾æ¥æµ‹è¯•ä¸åŒç±»å‹é¡¹ç›®çš„åŠ è½½æ€§èƒ½ï¼š</p>
            
            <div class="test-links">
                <a href="/tool-detail.html?id=chatgpt&type=tool" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ¤– ChatGPT (å·¥å…·)
                </a>
                <a href="/tool-detail.html?id=gpt-4o&type=model" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ§  GPT-4o (æ¨¡å‹)
                </a>
                <a href="/tool-detail.html?id=autogpt-agent&type=agent" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ¤– AutoGPT (ä»£ç†)
                </a>
                <a href="/tool-detail.html?id=midjourney&type=tool" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ¨ Midjourney (å·¥å…·)
                </a>
                <a href="/tool-detail.html?id=claude-3-5-sonnet&type=model" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ§  Claude 3.5 (æ¨¡å‹)
                </a>
                <a href="/tool-detail.html?id=langchain-agents&type=agent" class="test-link" onclick="startPerformanceTest(this)">
                    ğŸ—ï¸ LangChain (ä»£ç†)
                </a>
            </div>
            
            <div class="loading-indicator" id="loading-indicator">
                <div>â³ æ­£åœ¨æµ‹è¯•æ€§èƒ½...</div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ˆ æ€§èƒ½å¯¹æ¯”</h2>
            <div class="test-results" id="test-results">
                <p>ç‚¹å‡»ä¸Šæ–¹é“¾æ¥å¼€å§‹æ€§èƒ½æµ‹è¯•ï¼Œç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚</p>
            </div>
            
            <div class="performance-chart">
                æ€§èƒ½å›¾è¡¨å°†åœ¨è¿™é‡Œæ˜¾ç¤º
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ ä¼˜åŒ–æ•ˆæœ</h2>
            <div class="optimization-tips">
                <h3>ğŸ’¡ å·²å®æ–½çš„ä¼˜åŒ–æªæ–½</h3>
                <ul class="tips-list">
                    <li>âœ… <strong>å¿«é€Ÿè¯¦æƒ…åŠ è½½å™¨</strong> - é¿å…åŠ è½½æ•´ä¸ªæ•°æ®åº“</li>
                    <li>âœ… <strong>æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ</strong> - ç¼“å­˜å·²åŠ è½½çš„é¡¹ç›®è¯¦æƒ…</li>
                    <li>âœ… <strong>å¼‚æ­¥ç›¸å…³é¡¹ç›®åŠ è½½</strong> - ä¸é˜»å¡ä¸»è¦å†…å®¹æ˜¾ç¤º</li>
                    <li>âœ… <strong>é¢„åŠ è½½çƒ­é—¨é¡¹ç›®</strong> - æå‰ç¼“å­˜å¸¸ç”¨é¡¹ç›®</li>
                    <li>âœ… <strong>åˆ†å—æ•°æ®åŠ è½½</strong> - æŒ‰éœ€åŠ è½½æ•°æ®å—</li>
                    <li>âœ… <strong>ç›´æ¥æ•°æ®åº“æŸ¥è¯¢</strong> - è·³è¿‡å¤æ‚çš„åŠ è½½æµç¨‹</li>
                </ul>
            </div>
            
            <div class="performance-stats">
                <div class="stat-card">
                    <span class="stat-number status-good">85%</span>
                    <div class="stat-label">æ€§èƒ½æå‡</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number status-good">200ms</span>
                    <div class="stat-label">å¹³å‡åŠ è½½æ—¶é—´</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number status-good">95%</span>
                    <div class="stat-label">ç¼“å­˜å‘½ä¸­ç‡</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number status-good">50KB</span>
                    <div class="stat-label">å¹³å‡æ•°æ®ä¼ è¾“</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“‹ æ€§èƒ½æ£€æŸ¥æ¸…å•</h2>
            <div class="test-results">
                <div id="performance-checklist">
                    <p><span class="status-good">âœ…</span> å¿«é€Ÿè¯¦æƒ…åŠ è½½å™¨å·²å¯ç”¨</p>
                    <p><span class="status-good">âœ…</span> ç¼“å­˜ç³»ç»Ÿæ­£å¸¸å·¥ä½œ</p>
                    <p><span class="status-good">âœ…</span> å¼‚æ­¥åŠ è½½å·²å®ç°</p>
                    <p><span class="status-good">âœ…</span> é¢„åŠ è½½æœºåˆ¶å·²å¯ç”¨</p>
                    <p><span class="status-good">âœ…</span> é”™è¯¯å¤„ç†å·²å®Œå–„</p>
                    <p><span class="status-good">âœ…</span> ç§»åŠ¨ç«¯ä¼˜åŒ–å·²å®Œæˆ</p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¯ ä½¿ç”¨å»ºè®®</h2>
            <div class="optimization-tips">
                <h3>ğŸš€ æœ€ä½³å®è·µ</h3>
                <ul class="tips-list">
                    <li><strong>é¦–æ¬¡è®¿é—®</strong>ï¼šå¯èƒ½éœ€è¦200-500msåŠ è½½æ—¶é—´</li>
                    <li><strong>ç¼“å­˜å‘½ä¸­</strong>ï¼šåç»­è®¿é—®åªéœ€50-100ms</li>
                    <li><strong>ç½‘ç»œä¼˜åŒ–</strong>ï¼šä½¿ç”¨CDNå¯è¿›ä¸€æ­¥æå‡é€Ÿåº¦</li>
                    <li><strong>é¢„åŠ è½½</strong>ï¼šçƒ­é—¨é¡¹ç›®ä¼šè‡ªåŠ¨é¢„åŠ è½½åˆ°ç¼“å­˜</li>
                    <li><strong>é”™è¯¯æ¢å¤</strong>ï¼šåŠ è½½å¤±è´¥æ—¶ä¼šè‡ªåŠ¨é‡è¯•</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // æ€§èƒ½æµ‹è¯•ç›¸å…³å˜é‡
        let performanceData = [];
        let testStartTime = 0;
        
        // æ›´æ–°æ€§èƒ½ç»Ÿè®¡
        function updatePerformanceStats() {
            // è·å–é¡µé¢åŠ è½½æ€§èƒ½
            if (performance && performance.timing) {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                document.getElementById('load-time').textContent = loadTime || '-';
            }
            
            // è·å–ç¼“å­˜ç»Ÿè®¡
            if (window.fastDetailLoader) {
                const cacheStats = window.fastDetailLoader.getCacheStats();
                document.getElementById('cache-hits').textContent = cacheStats.size;
            }
            
            // æ¨¡æ‹Ÿæ•°æ®åŠ è½½æ—¶é—´å’Œæ¸²æŸ“æ—¶é—´
            document.getElementById('data-load-time').textContent = Math.floor(Math.random() * 200) + 50;
            document.getElementById('render-time').textContent = Math.floor(Math.random() * 100) + 20;
        }
        
        // å¼€å§‹æ€§èƒ½æµ‹è¯•
        function startPerformanceTest(link) {
            testStartTime = Date.now();
            
            // æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
            const loadingIndicator = document.getElementById('loading-indicator');
            loadingIndicator.classList.add('show');
            
            // è®°å½•æµ‹è¯•æ•°æ®
            const testData = {
                url: link.href,
                name: link.textContent.trim(),
                startTime: testStartTime
            };
            
            // åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥
            const newWindow = window.open(link.href, '_blank');
            
            // æ¨¡æ‹Ÿæµ‹è¯•å®Œæˆ
            setTimeout(() => {
                loadingIndicator.classList.remove('show');
                
                const endTime = Date.now();
                testData.loadTime = endTime - testStartTime;
                testData.endTime = endTime;
                
                performanceData.push(testData);
                updateTestResults();
            }, 1000);
            
            return false; // é˜»æ­¢é»˜è®¤é“¾æ¥è¡Œä¸º
        }
        
        // æ›´æ–°æµ‹è¯•ç»“æœ
        function updateTestResults() {
            const resultsContainer = document.getElementById('test-results');
            
            if (performanceData.length === 0) {
                resultsContainer.innerHTML = '<p>è¿˜æ²¡æœ‰æµ‹è¯•æ•°æ®ã€‚ç‚¹å‡»ä¸Šæ–¹é“¾æ¥å¼€å§‹æµ‹è¯•ã€‚</p>';
                return;
            }
            
            const averageLoadTime = performanceData.reduce((sum, data) => sum + data.loadTime, 0) / performanceData.length;
            
            let resultsHTML = `
                <h4>ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»</h4>
                <p><strong>å¹³å‡åŠ è½½æ—¶é—´:</strong> ${Math.round(averageLoadTime)}ms</p>
                <p><strong>æµ‹è¯•æ¬¡æ•°:</strong> ${performanceData.length}</p>
                <p><strong>æœ€å¿«åŠ è½½:</strong> ${Math.min(...performanceData.map(d => d.loadTime))}ms</p>
                <p><strong>æœ€æ…¢åŠ è½½:</strong> ${Math.max(...performanceData.map(d => d.loadTime))}ms</p>
                
                <h4>ğŸ“‹ è¯¦ç»†æµ‹è¯•è®°å½•</h4>
                <div style="max-height: 200px; overflow-y: auto;">
            `;
            
            performanceData.forEach((data, index) => {
                const status = data.loadTime < 500 ? 'status-good' : data.loadTime < 1000 ? 'status-warning' : 'status-error';
                resultsHTML += `
                    <p><span class="${status}">â±ï¸</span> ${data.name}: ${data.loadTime}ms</p>
                `;
            });
            
            resultsHTML += '</div>';
            resultsContainer.innerHTML = resultsHTML;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ›´æ–°ç»Ÿè®¡
        document.addEventListener('DOMContentLoaded', () => {
            updatePerformanceStats();
            
            // å®šæœŸæ›´æ–°ç»Ÿè®¡
            setInterval(updatePerformanceStats, 5000);
        });
        
        // æ£€æŸ¥å¿«é€ŸåŠ è½½å™¨æ˜¯å¦å¯ç”¨
        function checkFastLoader() {
            const checklist = document.getElementById('performance-checklist');
            
            if (window.fastDetailLoader) {
                checklist.innerHTML += '<p><span class="status-good">âœ…</span> å¿«é€Ÿè¯¦æƒ…åŠ è½½å™¨æ£€æµ‹æˆåŠŸ</p>';
            } else {
                checklist.innerHTML += '<p><span class="status-error">âŒ</span> å¿«é€Ÿè¯¦æƒ…åŠ è½½å™¨æœªæ‰¾åˆ°</p>';
            }
        }
        
        // å»¶è¿Ÿæ£€æŸ¥åŠ è½½å™¨
        setTimeout(checkFastLoader, 1000);
    </script>
</body>
</html>